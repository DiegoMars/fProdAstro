---
import { getCollection } from 'astro:content';
const FResearch = await getCollection('farisaResearch');

//shown research cards. Should work on ordering these by date in the future
const shownResearch = Object.values(FResearch).slice(0,3);
---
<section class="fFeatRes">
  <h3>Featured Research</h3>
  <div class="carousel">
    {shownResearch.map(FResearch => (
      <div class="card">
        <div class="img">
          <img
            src={FResearch.data.picture.url}
            alt={FResearch.data.picture.alt}
          />
        </div>
        <div class="description">
          <div class="title">
            <h5>{FResearch.data.title}</h5>
          </div>
          <div class="abstract">
            <p>
              {FResearch.body}
            </p>
          </div>
        </div>
      </div>
    ))}
    <a class="more" href="/farisaR">
      <img src="imgs/icons/arrow.svg">
      <h5>See more</h5>
    </a>
  </div>
</section>

<style>
.fFeatRes {
  background-color: var(--accent);
  padding: 1.5rem;
  color: var(--text);
  text-align: center;
}

.carousel  {
  padding-top: 1.5rem;
  padding-bottom: 1rem; /* Adds breathing room above scrollbar */
  display: flex;
  justify-content: space-evenly;
  overflow: auto;
  gap:2rem;
}

.carousel::-webkit-scrollbar {
  background-color: var(--accent);
  padding: 1rem 0;
  height: 1rem;
}

.carousel::-webkit-scrollbar-thumb {
  background-color: var(--primary);
  border-radius: 1rem;
}

.card {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  justify-content: space-evenly;
  width: 400px;
  padding: 1rem;
  background-color: var(--secondary);
  border-radius: 10px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.img > img {
  width: 100%;
  height: auto;
  max-width: 250px;
  border-radius: 10px;
}

.description {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  width: 400px;
  margin: 0 auto;
}

.title {
  color: var(--primary);
}

.title > h5 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.abstract > p{
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 8; /* Change to 2, 3, etc. for line count */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.more {
  margin:auto 0;
  text-decoration: none;
  color: var(--text);
  width: 101px;
  padding: 1rem;
  background-color: var(--background);
  border-radius: 1rem;
  transition: 0.3s;
}

.more:hover {
  background-color: var(--accent-800);
  color: var(--primary);
}

.more > img {
  width: 70px;
  padding-bottom: 0.5rem;
}

/* @media screen and (min-width: 576px){ /* At sm breakpoint, apply styles */ */

/* } */
/* @media screen and (min-width: 780px){ /* At md breakpoint, apply styles */ */

/* } */
/* @media screen and (min-width: 1200px){ /* At xl breakpoint, apply styles */ */

/* } */
</style>
